global
  log stdout format raw local0
  maxconn 256

defaults
  log global
  mode http
  option httplog
  timeout connect 5s
  timeout client  30s
  timeout server  30s

# ðŸ”‘ Docker DNS resolver
resolvers docker
  nameserver dns 127.0.0.11:53
  resolve_retries 3
  timeout retry 1s
  hold valid 10s

frontend http_in
  bind *:80
  default_backend web_backend

backend web_backend
  balance roundrobin

  option httpchk GET /actuator/health
  http-check expect status 200

  server-template app 3 app:8080 check resolvers docker init-addr none
